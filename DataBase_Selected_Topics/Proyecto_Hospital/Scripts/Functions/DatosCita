CREATE FUNCTION fn_DatosCita (@idcita INT)
RETURNS @Datos_paciente_cita TABLE (
	NSS VARCHAR(11),
	Cedula VARCHAR(16),
	Status_pac VARCHAR(10),
	Cama INT,
	Diagnostico VARCHAR(60),
	Tratamiento VARCHAR(60)
)
AS
BEGIN 
 DECLARE @nss VARCHAR(15), @cedula VARCHAR(16) ,@stat VARCHAR(10), @cama INT, @Diag VARCHAR(60), @Trat VARCHAR(60)
 SELECT @nss=Paciente.NSS,@cedula=Cita.Cedula_doc, @stat=Paciente.Status_pac, @cama=Paciente.Cama, @Diag=Cita.Diagnostico, @Trat=Paciente.Tratamiento FROM Cita INNER JOIN Paciente ON Cita.Id_Cita = @idcita
 	INSERT INTO @Datos_paciente_cita(NSS, Cedula, Status_pac, Cama, Diagnostico, Tratamiento) VALUES (@nss, @cedula, @stat, @cama, @Diag, @Trat)
RETURN
END

DROP FUNCTION dbo.fn_DatosCita

SELECT * FROM dbo.fn_DatosCita(2)
