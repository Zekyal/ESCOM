CREATE FUNCTION dbo.fn_EdadPaciente(@NSSpaciente VARCHAR(11))
	RETURNS INT
		AS 
			BEGIN
				DECLARE @Edad INT, @IDpaciente INT, @Fecha DATETIME
				SELECT @IDpaciente = Id_persona FROM Paciente WHERE NSS = @NSSpaciente
				SELECT @Fecha = Fechanac FROM Persona WHERE ID_persona = @IDpaciente
				SELECT @Edad = DATEDIFF(YEAR, @Fecha, GETDATE()) FROM Persona
				RETURN @Edad
			END


DROP FUNCTION dbo.fn_EdadPaciente

SELECT dbo.fn_EdadPaciente('UMF-4563897') FROM Paciente
